---
title: "Does Humor Impact  Dating Success?"
Team member: "Brian Xiao, Erin Reed, KT Norton, Luka Liu and Quazi Fairooz"
date: "12/11/2023"
output: 
  pdf_document: 
    number_sections: true
---

```{r package loads, include=FALSE, warning=FALSE}
# install.packages("pwr") need to install if you don't have it yet
library(data.table)
library(sandwich)
library(lmtest)

library(ggplot2)
library(knitr)
library(stargazer)
```

# Introducation

This experiment investigates the impact of introducing a humorous personality into dating app profiles on user engagement. The study involves creating ten fake profiles with identical photos but varying personality descriptionsâ€”five with a neutral tone and five with a highly humorous tone. The profiles are evenly distributed between a control group (neutral) and a treatment group (humorous). The study focuses on three primary metrics: the number of likes, matches, and comments received by the profiles. The experiment is conducted on the Hinge dating app in New York and San Francisco.

The experiment utilizes the paid version of Hinge (Hinge X) for enhanced visibility and collects data over a month week period (from mid-Oct to mid-Nov, 2023). Daily random swiping activity is conducted for both control and treatment groups to keep profiles active and increase interaction. Measurement involves tracking daily metrics for likes, matches, and comments in shared spreadsheets. The analysis considers potential matches based on mutual likes to maintain consistency in assessing engagement metrics.

We aim to examine whether profiles featuring a humorous and captivating personality description will demonstrate comparable levels of likes, comments on prompts, and overall engagement to profiles characterized by a neutral personality description, thus testing our null hypothesis.

# Data Cleaning
The following data captures the three major metrics such as swipes, likes, matches, and comments for different profiles on specific dates, categorized into control and treatment groups. The data consist of  information related to user profiles on a dating app. Here is a summary of the data columns:

- Owner: The team member who owns the profile.
- Profile_Name: The name associated with the profile.
- City: The city where the profile is located.
- Treat: Indicates whether the profile is in the control group or the treatment group.
- Treat_binary: Logical condition into binary values (0 for "Control" and 1 for "Treatment").
- Date: The date of the recorded data.
- Swipes: The number of times the profile was swiped.we carry out a daily random allocation of 10 swipes in the profiles, both in the control and treatment groups. This measure serves a dual purpose: first, it keeps our profiles actively participating in the app, and second, it facilitates interaction with other profiles, increasing the visibility of our profiles to other users. 
- Likes: The number of likes received by the profile.
- Matches: The number of matches made by the profile.
- Comments: The number of comments received on the profile. The number of comments, that responded to the prompt.
- OwnerNum: Owner variable transformed into an integer variable
- ProfileNum: Profile Name variable transformed into an integer
- CityNum: City variable transformed into an integer
- Day: Date variable transformed into an integer based on the day number in the experiment. Starting from one.

Records with missing values were omitted from the data.

```{r read hinge data}
d<- na.omit(fread("/home/rstudio/Final_project/data/W241_Hinge_Data_v2.csv"))
setnames(d, "Profile Name", "Profile_Name")
setnames(d, "Control vs Treatment", "Treat")
d[, Treat_binary := as.integer(Treat == "Treatment")]
head(d)
```
#Randomization Check
A randomization check was performed to evaluate whether our treatment and control groups make up representative samples. To perform this check two regression models were developed. The first model: null_mod is the simplest and captures the intercept. The second model: full_mod is more complex and includes profile characteristic variables such as: Who created the profile (Owner), The profile's name (Profile), The location -- San Francisco or New York -- the profile is active (City), The day the sample was collected (Day), and the number of swipes taken on the profile (Swipes).

```{r}
null_mod <- d[ , lm(Treat_binary ~ 1)]

full_mod <- d[ , lm(Treat_binary ~ 1 + OwnerNum + ProfileNum + City + ExpDay + Swipes)]
```

The first simple model illustrates a 0.502 intercept to support the assumption that both treatment and control groups make up representative samples. However, the more complex model with five covariates captures a small pattern. The City variable has a statistically significant correlation with treatment outcomes. This suggests that different profile locations (San Francisco or New York) contribute to sample differences between the treatment group and the control group.

```{r warning=FALSE}
stargazer(null_mod, full_mod, 
          type = "text",
         covariate.labels = c("Owner", "Profile", "City - San Francisco", "Day", "Swipes", "Intercept")
          )
```
However, while the City variable is statistical significant the impact seems impractically significant at 0.131. 
To further illustrate the minimal impact the City variable has on treatment assignment, we've run an F-test between our two models (null mod, full mod). As suspected, while City location is statistically significant, the difference does not result in material differences in model performance. While variance is higher with our simple model, it still generates the same outcomes as the complex model for 97% of samples.

```{r}
anova_mod <- anova(full_mod, null_mod, test = 'F')
anova_mod
```
